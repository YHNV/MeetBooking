<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<!-- <mapper namespace="com.example.mapper.UserMapper"> -->

<mapper namespace="com.zb.backend.mapper.EmployeeMapper">
    <!-- Employee实体类与employees表的字段映射 -->
    <resultMap id="EmployeeResultMap" type="com.zb.backend.entity.Employee">
        <result property="empId" column="emp_id"/>
        <result property="empName" column="emp_name"/>
        <result property="deptId" column="dept_id"/>
        <result property="position" column="position"/>
        <result property="phone" column="phone"/>
        <result property="email" column="email"/>
        <result property="idCard" column="id_card"/>
        <result property="isManager" column="is_manager"/>
        <result property="createTime" column="create_time"/>
        <result property="updateTime" column="update_time"/>
    </resultMap>
    <insert id="insertEmployee">
        insert into EMPLOYEES (emp_name, dept_id, position, phone, email, id_card, is_manager)
        values (#{empName}, #{deptId}, #{position}, #{phone}, #{email}, #{idCard}, #{isManager});
    </insert>
    <select id="existsByPhone" resultType="java.lang.Boolean">
        select count(*) > 0
        from EMPLOYEES
        where PHONE = #{phone};
    </select>
    <select id="existsByIdCard" resultType="java.lang.Boolean">
        select count(*) > 0
        from EMPLOYEES
        where ID_CARD = #{idCard};
    </select>
    <select id="selectEmployeeByEmpId" resultType="com.zb.backend.entity.Employee">
        select emp_id, emp_name, dept_id, position, phone, email, id_card, is_manager, create_time, update_time
        from EMPLOYEES
        where EMP_ID = #{empId};
    </select>
</mapper>